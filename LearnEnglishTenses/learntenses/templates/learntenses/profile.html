{% extends 'learntenses/base.html' %}

{% block extra_css %}
  {% load static %}
  <link rel="stylesheet" href="{% static 'learntenses/styles/profile.css' %}">
{% endblock %}

{% block content %}


<div class="profile-container">
  <div class="profile-header">
    <div>
      <h2>Hello, {{request.user.userprofile.name.split.1}}!</h2>
      <div class="joined-info">
        <img class="icon-joined" src="{% static 'learntenses/images/calendar.png' %}" alt="">
        <p>Joined {{ request.user.date_joined|date:"F Y" }}</p>
      </div>  
    </div>
    <div>
      <div class="edit-profile">
        <a href="{% url 'home:edit_profile' %}">
          <div class="edit-info">
            <img class="edit-icon" src="{% static 'learntenses/images/edit.png' %}" alt="">
            <p>Edit profile</p>
          </div>
        </a>
      </div>
    </div>
  </div>
  <div class="profile-body">
    <div class="stats">
     <img class="stats-icon" src="{% static 'learntenses/images/statistics.png' %}" alt=""> 
      Statistics
    </div>
    {% for tense in user.userprofile.completed_tasks_by_tense %}
      <div class="tense" data-tense="{{ tense.task__tense }}">
          <p>{{ tense.task__tense }}</p>
          <p>{{tense.count}}</p>
      </div>
    {% endfor %}
  </div>
</div>  

<script>
  var tenseMapping = {
      'PS': 'Present Simple',
      'PC': 'Present Continuous',
      'PP': 'Present Perfect',
      'PaS': 'Past Simple',
      'PaC': 'Past Continuous',
      'PaP': 'Past Perfect',
      'FS': 'Future Simple',
      'FC': 'Future Continuous',
      'FP': 'Future Perfect',
  };

  var tenseElements = document.getElementsByClassName('tense');

  for (var i = 0; i < tenseElements.length; i++) {
      var tenseElement = tenseElements[i];
      var tense = tenseElement.getAttribute('data-tense');
      var fullForm = tenseMapping[tense];
      tenseElement.getElementsByTagName('p')[0].textContent = fullForm;
  }
</script>

{% endblock %}